<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Do it in code! | WordCamp Vancouver 2016</title>

    <link rel="stylesheet" href="../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../css/rexrana-dark.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/qtcreator_dark.min.css">

    <!-- Printing and PDF exports -->
    <script src="../js/print-pdf.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section class="title-slide">
          <div class="center-block img-small">
            <img src="wcyvr2016-logo-white.png" alt="WordCamp Vancouver 2016" class="fit">
          </div>

          <header>
            <h1>Do it in code!</h1>
            <h2>A guide to creating a custom site structure plugin in WordPress.</h2>
          </header>
          <div class="presenter">
            <p>Presented by:</p>
            <h3>Peter Hebert</h3>
            <p>
              Rex Rana Design and Development Ltd.
            </p>
          </div>
        </section>

        <section>
          <h1>What is site structure?</h1>
          <ul class="fragment">
            <li>Post Types</li>
            <li>Metaboxes and Fields</li>
            <li>Taxonomy</li>
            <li>Menus</li>
            <li>Permalink Structure</li>
          </ul>
        </section>

        <section>
          <h1>Why a custom plugin?</h1>
          <ul>
            <li class="fragment">
              Functionality should live in code, not the database
            </li>
            <li class="fragment">
              Themes for presentation, plugins for functionality
            </li>
            <li class="fragment">
              Manage code in version control system (git, svn)</li>
            <li class="fragment">Code Portability / Deployment
              <ul>
                <li>
                  dev / staging / production
                </li>
                <li>
                  re-use for multiple websites / different clients
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h1>Our Sample Plugin</h1>
          <p>
            We'll create a Film listing (like IMDB)
          </p>
          <ul>
            <li>
              Custom Post Type: Film
            </li>
            <li>
              Custom Taxonomy: Genre
            </li>
            <li>
              Metabox: Film Info
            </li>
            <li>
              Fields: Release Date, Duration, Director
            </li>
          </ul>
            <p style="margin-top:1.5em">
              <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
             <span class="small"><a href="https://github.com/rexrana/my-custom-structure">github.com/rexrana/my-custom-structure</a></span>
            </p>
        </section>
        <section>
          <h1>WordPress core functionality</h1>
          <ul>
            <li class="fragment">
              Not easy to use &mdash; you have to do all the heavy lifting
              <ul class="fragment">
                <li>CRUD functions (create, read, update and delete)
                </li>
                <li>
                  Callback functions with HTML to display fields in admin
                </li>
                <li>
                  Sanitization / validation of input
                </li>
                <li>
                  nonces
                </li>
              </ul>
            </li>
            <li class="fragment">
              It's a lot to remember &mdash; time could be better spent
            </li>

          </ul>

        </section>
        <section>
          <h1>Thankfully, there&rsquo;s a better way!</h1>
          <p>
            Many tools exist for simplifying the creation of site structure:
          </p>
          <ul>
            <li class="fragment">
              Plugins (Advanced Custom Fields, Pods, etc.)
              <ul>
                <li class="fragment">
                  Most have an export to code functionality
                </li>
              </ul>
            </li>
            <li class="fragment">
              Developer libraries: CMB2, Custom Meta Boxes
            </li>
            <li class="fragment">
              Code Generators: GenerateWP, WP-CLI <em>scaffold</em> command
            </li>
          </ul>
        </section>
        <section>
          <h1>GUI-based structure plugins</h1>
          <p>
            Create your structure in the admin, then export to code.
          </p>
          <ul>
            <li class="fragment">
              <a href="https://www.advancedcustomfields.com/">Advanced Custom Fields</a>
              <ul>
                <li>
                  export to XML <span class="small">(v4 and below)</span>, JSON <span class="small">(v5)</span>, PHP
                </li>
              </ul>
            </li>
            <li class="fragment">
              <a href="http://pods.io/">Pods</a>
              framework
              <ul>
                <li>
                  Migrate: Packages
                </li>
                <li>
                  Pods Deploy - uses WordPress REST API <span class="small">(beta)</span>
                </li>
              </ul>

            </li>
            <li class="fragment">
              <a href="https://wp-types.com/">Toolset</a>
              <ul>
                <li>
                  <a href="https://wp-types.com/documentation/embedded-toolset/">Embedded Toolset</a>
                  / Packager
                </li>
              </ul>
            </li>

          </ul>
        </section>
        <section>
          <header>
            <h1>Developer library: CMB2</h1>
  <p>
    <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
     <a href="https://github.com/WebDevStudios/CMB2">github.com/WebDevStudios/CMB2</a>
  </p>

          </header>
          <ul>
            <li class="fragment">
              Toolkit for building metaboxes, custom fields, and forms
            </li>
            <li class="fragment">
              Takes care of all the hard stuff for you
            </li>
            <li class="fragment">
              Declare metaboxes and fields using arrays of parameters
            </li>
            <li class="fragment">
              32 field types included, with API to declare your own
            </li>
            <li class="fragment">
              Use on Post Types, Options Pages, User Profiles
              <ul>
                <li>
                  even on the front end of your site
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <header>
            <h1>Developer library: Custom Meta Boxes</h1>
            <p>
              <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
              <a href="https://github.com/humanmade/Custom-Meta-Boxes/">github.com/humanmade/Custom-Meta-Boxes/</a>
            </p>
          </header>
          <ul>
            <li class="fragment">
              Framework for easily adding custom fields
            </li>
            <li class="fragment">
              works similarly to CMB2 (parameter arrays)
            </li>
            <li class="fragment">
              (seems to) only work on post edit pages
            </li>
            <li class="fragment">
              fork of original CMB (predecessor to CMB2)
            </li>
            <li class="fragment">
              20 field types included, plus repeater field
            </li>
            <li class="fragment">
              features a basic 12 column grid system to align fields
            </li>
          </ul>
        </section>
        <section>
          <header>
            <h1>Code Generators: GenerateWP</h1>
            <p>
              <img src="../font-awesome-icons/white/svg/link.svg" alt="Website link" class="icon"/>
              <a href="https://generatewp.com/">generatewp.com</a>
            </p>
          </header>
          <ul>
            <li class="fragment">
              Form-based wizards for generating code compliant with WordPress coding standards
            </li>
            <li class="fragment">
              Select a tool, fill in the form, generate the code
            </li>
            <li class="fragment">
              Copy ready-to-use code directly to your plugin.
            </li>
          </ul>
        </section>
        <section>
          <header>
            <h1>Code Generators: WP-CLI 'scaffold'</h1>
            <p>
              <img src="../font-awesome-icons/white/svg/link.svg" alt="Website link" class="icon"/>
  <a href="http://wp-cli.org/commands/scaffold/">wp-cli.org/commands/scaffold/</a>
            </p>
          </header>
          <p>Command within WordPress command-line interface (CLI)
          </p>
          <ul>
            <li class="fragment">
              Generates starter code for themes, plugins, unit tests, post types and taxonomy.
            </li>
            <li class="fragment">Limited - cannot specify advanced parameters, only gives minimal config with defaults</li>
            <li class="fragment">Provides a quick start-off point</li>
          </ul>
          <aside class="notes">
            <ul>
              <li>
                cannot specify 'supports' (post types)
              </li>
            </ul>
          </aside>
        </section>
        <section>
          <h1>WP-CLI Scaffolding Examples</h1>
          <p>Run commands from within site directory</p>
          <div class="fragment">
            <p>'Film' post type</p>
            <pre><code class="hljs sh">wp scaffold post-type film --label=Film --textdomain=structure \
--dashicon=editor-video --plugin=my-custom-structure</code></pre>
          </div>
          <div class="fragment">
            <p>'Genre' taxonomy</p>
            <pre><code class="hljs sh">wp scaffold taxonomy genre --post_types=film --label=Genre \
--textdomain=structure --plugin=my-custom-structure</code></pre>
          </div>
        </section>
        <section>
          <h1>Putting it all together</h1>
          <ul>
            <li>
              If using ACF or CMB2 :
              <ul>
                <li class="fragment">
                  Install plugin in normal way, or:
                </li>
                <li class="fragment">
                  Download to a subdirectory, include in your plugin's main PHP file
                </li>
              </ul>
            </li>
            <li class="fragment">
              Create separate PHP files for each of: Post Types, Taxonomy, Metaboxes/Fields
              <ul>
                <li class="fragment">
                  include these files in your main plugin PHP file
                </li>
                <li class="fragment">this makes items easier to find, comment out or remove</li>
              </ul>
            </li>
          </ul>
          <aside class="notes">
            <ul>
              <li>
                Premium plugins require a ACF Pro licence
              </li>
              <li>
                show plugin folder structure in code editor
              </li>
            </ul>
          </aside>
        </section>
<section>
  <header>
    <h1>Developer library includes</h1>
  </header>
  <p>
    Advanced Custom Fields
  </p>
  <pre><code class="hljs php">if( file_exists( dirname(__FILE__).'/lib/advanced-custom-fields/acf.php' ) ) {
include_once( 'lib/advanced-custom-fields/acf.php' );
}</code></pre>
<p>
  CMB2
</p>
<pre><code class="hljs php">if( file_exists( dirname(__FILE__).'/lib/cmb2/init.php' ) ) {
    include_once( 'lib/cmb2/init.php' );
}</code></pre>
</section>
<section>
  <h1>Includes for declaring structure</h1>
  <pre><code class="hljs php">include_once('post-types/film.php');
include_once('taxonomies/genre.php');

// METABOXES AND FIELDS
/* using WordPress core functionality */
include_once('inc/wp-fields.php');
/* using ACF */
include_once('inc/acf-fields.php');
/* using CMB2  */
include_once('inc/cmb2-metaboxes.php');</code></pre>
</section>

        <section>
          <h1>Resources</h1>
          <ul>
            <li>CMB2: THE METABOX STRIKES BACK (Justin Sternberg)<br />
              <a href="http://storyftw.com/cmb2-metabox-strikes-back">storyftw.com/cmb2-metabox-strikes-back</a>
            </li>
            <li>Plugin comparison - Custom Post Types / Fields<br />
              (Google spreadsheet) <a href="https://docs.google.com/spreadsheets/d/1mSqienVYxLopTFGLPK0lGCJst2knKzXDtLQRgwjeBN8/">goo.gl/o7kU9s</a>
            </li>
            <li>Custom Post Type Permalinks (plugin)<br />
              <a href="https://wordpress.org/plugins/custom-post-type-permalinks/">wordpress.org/plugins/custom-post-type-permalinks/</a>
            </li>
          </ul>
        </section>
        <section>
            <h1>Thank You</h1>
            <p>
              Find me online:
            </p>
            <p class="row">
              <span class="icons">
                <img src="../font-awesome-icons/white/svg/link.svg" alt="Rex Rana website" class="icon"/>
              </span>
              <span class="float-left">
                <a href="https://rexrana.ca">rexrana.ca</a><br />
                <a href="http://peterhebert.com">peterhebert.com</a>
              </span>
            </p>
            <p class="row">
              <span class="icons">
                <img src="../font-awesome-icons/white/svg/twitter.svg" alt="Twitter" class="icon"/>
              </span>
              <span class="float-left">
                <a href="https://twitter.com/RexRanaDesign">@RexRanaDesign</a><br/>
                <a href="https://twitter.com/peter_hebert">@peter_hebert</a>
              </span>
            </p>
            <p class="row">
              <span class="icons">
                <img src="../font-awesome-icons/white/svg/wordpress.svg" alt="WordPress.org" class="icon"/>
                <img src="../font-awesome-icons/white/svg/drupal.svg" alt="Drupal.org" class="icon"/>
                <img src="../font-awesome-icons/white/svg/linkedin.svg" alt="LinkedIn" class="icon"/>
                <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
              </span>
              <span class="float-left">
                peterhebert
              </span>
            </p>
            <p class="row">
              <span class="icons">
                <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
              </span>
              <span class="float-left">rexrana
              </span>
            </p>

        </section>
      </div>
      <div class="brand" id="logo-id"><img class="logo" src="../img/frog-king-head-white.svg">
        Rex Rana</div>
    </div>

    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.js"></script>
    <!-- initialize reveal.js -->
    <script src="../js/reveal-init.js"></script>
  </body>
</html>
