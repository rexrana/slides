<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Do it in code! | WordCamp Vancouver 2016</title>

    <link rel="stylesheet" href="../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../css/rexrana-dark.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/qtcreator_dark.min.css">

    <!-- Printing and PDF exports -->
    <script src="../js/print-pdf.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section class="title-slide">

          <div class="center-block img-small">
            <img src="wcyvr2016-logo-white.png" alt="WordCamp Vancouver 2016" class="fit">
          </div>

          <header>
            <h1>Do it in code!</h1>
            <h2>A guide to creating a custom site structure plugin in WordPress.</h2>
          </header>
          <div class="presenter">
            <p>Presented by:</p>
            <h3>Peter Hebert</h3>
            <p>
              Rex Rana Design and Development Ltd.
            </p>
          </div>
        </section>

        <section>
          <h1>Why a custom plugin?</h1>
          <ul>
            <li>
              Because site functionality should live in code, not the database
            </li>
            <li>
              Manage code in version control system (git, svn)</li>
            <li>Code Portability / Deployment
              <ul>
                <li>
                  dev / staging / production
                </li>
                <li>
                  re-use for multiple websites / different clients
                </li>
              </ul>
            </li>
          </ul>

        </section>

        <section>
          <h1>Our Sample Plugin</h1>
          <p>
            We'll create a Film listing (like IMDB)
          </p>
          <ul class="fragments">
            <li>
              Custom Post Type: Film
            </li>
            <li>
              Custom Taxonomy: Genre
            </li>
            <li>
              Metabox: Film Info
            </li>
            <li>
              Fields: Release Date, Duration, Director
            </li>
          </ul>
            <p>
              <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
             Download or clone sample plugin on <a href="https://github.com/peterhebert/my-custom-structure">GitHub</a>
            </p>
        </section>
        <section>
          <h1>WordPress core functionality</h1>
          <ul>
            <li>
              Not easy to use &mdash; you have to do all the heavy lifting
              <ul>
                <li>create, read, update and delete (CRUD) functions
                </li>
                <li>
                  Callback functions with HTML to display fields in admin
                </li>
                <li>
                  Sanitization / validation of input
                </li>
                <li>
                  nonces
                </li>
              </ul>
            </li>
            <li>
              It's a lot to remember &mdash; time could be better spent
            </li>

          </ul>

        </section>
        <section>
          <h1>Thankfully, there is a better way!</h1>
          <p>
            Many tools exist for simplifying the creation of site structure:
          </p>
          <ul>
            <li class="fragment">
              Plugins (Advanced Custom Fields, Pods, Toolset, etc.)
              <ul>
                <li class="fragment">
                  All have some type of export to code functionality
                </li>
              </ul>
            </li>
            <li class="fragment">
              Developer libraries:
              <a href="https://github.com/WebDevStudios/CMB2">CMB2</a>
            </li>
            <li class="fragment">
              Code Generators:
              <a href="https://generatewp.com/">GenerateWP</a>
            </li>
            <li class="fragment">
              WP-CLI:
              <a href="http://wp-cli.org/commands/scaffold/">scaffold</a>
              command
            </li>
          </ul>

        </section>
        <section>
          <h1>GUI-based structure plugins</h1>
          <p>
            Create your structure in the admin, then export to code.
          </p>
          <ul>
            <li class="fragment">
              <a href="https://www.advancedcustomfields.com/">Advanced Custom Fields</a><br/>
              export to XML <span class="small">(v4 and below)</span>, JSON <span class="small">(v5)</span>, PHP
            </li>
            <li class="fragment">
              <a href="http://pods.io/">Pods</a>
              framework
              <ul>
                <li>
                  Migrate: Packages
                </li>
                <li>
                  Pods Deploy - uses WordPress REST API <span class="small">(beta)</span>
                </li>
              </ul>

            </li>
            <li class="fragment">
              <a href="https://wp-types.com/">Toolset</a>
              <ul>
                <li>
                  <a href="https://wp-types.com/documentation/embedded-toolset/">Embedded Toolset</a>
                  / Packager
                </li>
              </ul>
            </li>

          </ul>
        </section>
        <section>
          <h1>Developer library:
            <a href="https://github.com/WebDevStudios/CMB2">CMB2</a>
          </h1>

          <ul>
            <li>
              Toolkit for building metaboxes, custom fields, and forms
            </li>
            <li>
              Takes care of all the hard stuff for you
            </li>
            <li>
              Declare metaboxes and fields using arrays of parameters
            </li>
            <li>
              32 field types included, with API to declare your own
            </li>
            <li>
              Use on Post Types, Options Pages, User Profiles
              <ul>
                <li>
                  even on the front end of your site
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h1>
            <a href="https://generatewp.com/">GenerateWP</a>
          </h1>
          <ul>
            <li>
              Form-based wizards for generating code compliant with WordPress coding standards
            </li>
            <li>
              Select a tool, fill in the form, generate the code
            </li>
            <li>
              Copy ready-to-use code directly to your plugin.
            </li>
          </ul>
        </section>
        <section>
          <h1>WP-CLI - 'scaffold' command</h1>
          <p>
            The WordPress command-line interface (CLI) has a basic generator command:
            <a href="http://wp-cli.org/commands/scaffold/">scaffold</a>.
          </p>
          <ul>
            <li>
              Generates starter code for themes, plugins, unit tests, post types and taxonomy.
            </li>
            <li>Limited - cannot specify advanced parameters, only gives minimal config with defaults</li>  
            <li>Provides a quick start-off point</li>  
          </ul>
          <aside class="notes">
            <ul>
              <li>
                cannot specify 'supports' (post types)
              </li>
            </ul>
          </aside>
        </section>
        <section>
          <h1>WP-CLI Scaffolding Examples</h1>
          <p>Run commands from rom within site directory</p>
          <p>'Film' post type</p>
          <pre><code class="hljs sh">wp scaffold post-type film --label=Film --textdomain=structure \
--dashicon=editor-video --plugin=my-custom-structure</code></pre>
          <p>'Genre' taxonomy</p>
          <pre><code class="hljs sh">wp scaffold taxonomy genre --post_types=film --label=Genre \
--textdomain=structure --plugin=my-custom-structure</code></pre>
        </section>
        <section>
          <h1>Putting it all together</h1>
          <ul>
            <li>
              If using ACF or CMB2 :
              <ul>
                <li>
                  Install plugin in normal way, or download to a subdirectory
                </li>
                <li>
                  Include ACF or CMB2 in your plugin's main PHP file</li>
              </ul>

            </li>
            <li>
              Create separate include files for each of:
              <ul>
                <li>
                  Post Types, Taxonomy, Metaboxes/Fields
                </li>
            <li>This makes individual items easier to find, comment out or remove</li>
              </ul>
            </li>

          </ul>

          <aside class="notes">
            <ul>
              <li>
                Premium plugins require a ACF Pro licence
              </li>
              <li>
                show plugin folder structure in code editor
              </li>
            </ul>
          </aside>
        </section>

        <section>
          <h1>Resources</h1>
          <ul>
            <li>
              <a href="http://storyftw.com/cmb2-metabox-strikes-back">CMB2: THE METABOX STRIKES BACK</a>
              (Justin Sternberg)
            </li>
            <li>
              <a href="https://docs.google.com/spreadsheets/d/1mSqienVYxLopTFGLPK0lGCJst2knKzXDtLQRgwjeBN8/edit#gid=3">Plugin comparison - Content Types / Custom Fields</a>
              (Google spreadsheet)
            </li>
          </ul>

        </section>

        <section>
          <header>
            <h1>Find me online</h1>
          </header>
          <p class="row">
            <span class="icons">
              <img src="../font-awesome-icons/white/svg/link.svg" alt="Rex Rana website" class="icon"/>
            </span>
            <span class="float-left">
              <a href="https://rexrana.ca">rexrana.ca</a><br/>
              <a href="http://peterhebert.com">peterhebert.com</a>
            </span>
          </p>
          <p class="row">
            <span class="icons">
              <img src="../font-awesome-icons/white/svg/twitter.svg" alt="Twitter" class="icon"/>
            </span>
            <span class="float-left">
              @RexRanaDesign<br/>
              @peter_hebert
            </span>
          </p>

          <p class="row">
            <span class="icons">
              <img src="../font-awesome-icons/white/svg/wordpress.svg" alt="WordPress.org" class="icon"/>
              <img src="../font-awesome-icons/white/svg/drupal.svg" alt="Drupal.org" class="icon"/>
              <img src="../font-awesome-icons/white/svg/github.svg" alt="GitHub" class="icon"/>
              <img src="../font-awesome-icons/white/svg/linkedin.svg" alt="LinkedIn" class="icon"/>
            </span>
            <span class="float-left">
              peterhebert
            </span>
          </p>

        </section>
      </div>
      <div class="brand" id="logo-id"><img class="logo" src="../img/frog-king-head-white.svg">
        Rex Rana</div>
    </div>

    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.js"></script>
    <!-- initialize reveal.js -->
    <script src="../js/reveal-init.js"></script>
  </body>
</html>
